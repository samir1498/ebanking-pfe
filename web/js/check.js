/* 
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/JSP_Servlet/JavaScript.js to edit this template
 */

var ar = {
  "loadingRecords": "جارٍ التحميل...",
  "lengthMenu": "أظهر _MENU_ مدخلات",
  "zeroRecords": "لم يعثر على أية سجلات",
  "info": "إظهار _START_ إلى _END_ من أصل _TOTAL_ مدخل",
  "search": "ابحث:",
  "paginate": {
    "first": "الأول",
    "previous": "السابق",
    "next": "التالي",
    "last": "الأخير"
  },
  "aria": {
    "sortAscending": ": تفعيل لترتيب العمود تصاعدياً",
    "sortDescending": ": تفعيل لترتيب العمود تنازلياً"
  },
  "select": {
    "rows": {
      "_": "%d قيمة محددة",
      "1": "1 قيمة محددة"
    },
    "cells": {
      "1": "1 خلية محددة",
      "_": "%d خلايا محددة"
    },
    "columns": {
      "1": "1 عمود محدد",
      "_": "%d أعمدة محددة"
    }
  },
  "buttons": {
    "print": "طباعة",
    "copyKeys": "زر <i>ctrl<\/i> أو <i>⌘<\/i> + <i>C<\/i> من الجدول<br>ليتم نسخها إلى الحافظة<br><br>للإلغاء اضغط على الرسالة أو اضغط على زر الخروج.",
    "pageLength": {
      "-1": "اظهار الكل",
      "_": "إظهار %d أسطر"
    },
    "collection": "مجموعة",
    "copy": "نسخ",
    "copyTitle": "نسخ إلى الحافظة",
    "csv": "CSV",
    "excel": "Excel",
    "pdf": "PDF",
    "colvis": "إظهار الأعمدة",
    "colvisRestore": "إستعادة العرض",
    "copySuccess": {
      "1": "تم نسخ سطر واحد الى الحافظة",
      "_": "تم نسخ %ds أسطر الى الحافظة"
    }
  },
  "searchBuilder": {
    "add": "اضافة شرط",
    "clearAll": "ازالة الكل",
    "condition": "الشرط",
    "data": "المعلومة",
    "logicAnd": "و",
    "logicOr": "أو",
    "title": [
      "منشئ البحث"
    ],
    "value": "القيمة",
    "conditions": {
      "date": {
        "after": "بعد",
        "before": "قبل",
        "between": "بين",
        "empty": "فارغ",
        "equals": "تساوي",
        "notBetween": "ليست بين",
        "notEmpty": "ليست فارغة",
        "not": "ليست "
      },
      "number": {
        "between": "بين",
        "empty": "فارغة",
        "equals": "تساوي",
        "gt": "أكبر من",
        "lt": "أقل من",
        "not": "ليست",
        "notBetween": "ليست بين",
        "notEmpty": "ليست فارغة",
        "gte": "أكبر أو تساوي",
        "lte": "أقل أو تساوي"
      },
      "string": {
        "not": "ليست",
        "notEmpty": "ليست فارغة",
        "startsWith": " تبدأ بـ ",
        "contains": "تحتوي",
        "empty": "فارغة",
        "endsWith": "تنتهي ب",
        "equals": "تساوي",
        "notContains": "لا تحتوي",
        "notStarts": "لا تبدأ بـ",
        "notEnds": "لا تنتهي بـ"
      },
      "array": {
        "equals": "تساوي",
        "empty": "فارغة",
        "contains": "تحتوي",
        "not": "ليست",
        "notEmpty": "ليست فارغة",
        "without": "بدون"
      }
    },
    "button": {
      "0": "فلاتر البحث",
      "_": "فلاتر البحث (%d)"
    },
    "deleteTitle": "حذف فلاتر"
  },
  "searchPanes": {
    "clearMessage": "ازالة الكل",
    "collapse": {
      "0": "بحث",
      "_": "بحث (%d)"
    },
    "count": "عدد",
    "countFiltered": "عدد المفلتر",
    "loadMessage": "جارِ التحميل ...",
    "title": "الفلاتر النشطة",
    "showMessage": "إظهار الجميع",
    "collapseMessage": "إخفاء الجميع"
  },
  "infoThousands": ",",
  "datetime": {
    "previous": "السابق",
    "next": "التالي",
    "hours": "الساعة",
    "minutes": "الدقيقة",
    "seconds": "الثانية",
    "unknown": "-",
    "amPm": [
      "صباحا",
      "مساءا"
    ],
    "weekdays": [
      "الأحد",
      "الإثنين",
      "الثلاثاء",
      "الأربعاء",
      "الخميس",
      "الجمعة",
      "السبت"
    ],
    "months": [
      "يناير",
      "فبراير",
      "مارس",
      "أبريل",
      "مايو",
      "يونيو",
      "يوليو",
      "أغسطس",
      "سبتمبر",
      "أكتوبر",
      "نوفمبر",
      "ديسمبر"
    ]
  },
  "editor": {
    "close": "إغلاق",
    "create": {
      "button": "إضافة",
      "title": "إضافة جديدة",
      "submit": "إرسال"
    },
    "edit": {
      "button": "تعديل",
      "title": "تعديل السجل",
      "submit": "تحديث"
    },
    "remove": {
      "button": "حذف",
      "title": "حذف",
      "submit": "حذف",
      "confirm": {
        "_": "هل أنت متأكد من رغبتك في حذف السجلات %d المحددة؟",
        "1": "هل أنت متأكد من رغبتك في حذف السجل؟"
      }
    },
    "error": {
      "system": "حدث خطأ ما"
    },
    "multi": {
      "title": "قيم متعدية",
      "restore": "تراجع"
    }
  },
  "processing": "جارٍ المعالجة...",
  "emptyTable": "لا يوجد بيانات متاحة في الجدول",
  "infoEmpty": "يعرض 0 إلى 0 من أصل 0 مُدخل",
  "thousands": ".",
  "stateRestore": {
    "creationModal": {
      "columns": {
        "search": "إمكانية البحث للعمود",
        "visible": "إظهار العمود"
      },
      "toggleLabel": "تتضمن"
    }
  },
  "autoFill": {
    "cancel": "إلغاء الامر",
    "fill": "املأ كل الخلايا بـ <i>%d<\/i>",
    "fillHorizontal": "تعبئة الخلايا أفقيًا",
    "fillVertical": "تعبئة الخلايا عموديا"
  },
  "decimal": ",",
  "infoFiltered": "(مرشحة من مجموع _MAX_ مُدخل)"
};
var fr = {
  "emptyTable": "Aucune donnée disponible dans le tableau",
  "loadingRecords": "Chargement...",
  "processing": "Traitement...",
  "aria": {
    "sortAscending": ": activer pour trier la colonne par ordre croissant",
    "sortDescending": ": activer pour trier la colonne par ordre décroissant"
  },
  "select": {
    "rows": {
      "_": "%d lignes sélectionnées",
      "1": "1 ligne sélectionnée"
    },
    "cells": {
      "1": "1 cellule sélectionnée",
      "_": "%d cellules sélectionnées"
    },
    "columns": {
      "1": "1 colonne sélectionnée",
      "_": "%d colonnes sélectionnées"
    }
  },
  "autoFill": {
    "cancel": "Annuler",
    "fill": "Remplir toutes les cellules avec <i>%d<\/i>",
    "fillHorizontal": "Remplir les cellules horizontalement",
    "fillVertical": "Remplir les cellules verticalement"
  },
  "searchBuilder": {
    "conditions": {
      "date": {
        "after": "Après le",
        "before": "Avant le",
        "between": "Entre",
        "empty": "Vide",
        "not": "Différent de",
        "notBetween": "Pas entre",
        "notEmpty": "Non vide",
        "equals": "Égal à"
      },
      "number": {
        "between": "Entre",
        "empty": "Vide",
        "gt": "Supérieur à",
        "gte": "Supérieur ou égal à",
        "lt": "Inférieur à",
        "lte": "Inférieur ou égal à",
        "not": "Différent de",
        "notBetween": "Pas entre",
        "notEmpty": "Non vide",
        "equals": "Égal à"
      },
      "string": {
        "contains": "Contient",
        "empty": "Vide",
        "endsWith": "Se termine par",
        "not": "Différent de",
        "notEmpty": "Non vide",
        "startsWith": "Commence par",
        "equals": "Égal à",
        "notContains": "Ne contient pas",
        "notEnds": "Ne termine pas par",
        "notStarts": "Ne commence pas par"
      },
      "array": {
        "empty": "Vide",
        "contains": "Contient",
        "not": "Différent de",
        "notEmpty": "Non vide",
        "without": "Sans",
        "equals": "Égal à"
      }
    },
    "add": "Ajouter une condition",
    "button": {
      "0": "Recherche avancée",
      "_": "Recherche avancée (%d)"
    },
    "clearAll": "Effacer tout",
    "condition": "Condition",
    "data": "Donnée",
    "deleteTitle": "Supprimer la règle de filtrage",
    "logicAnd": "Et",
    "logicOr": "Ou",
    "title": {
      "0": "Recherche avancée",
      "_": "Recherche avancée (%d)"
    },
    "value": "Valeur"
  },
  "searchPanes": {
    "clearMessage": "Effacer tout",
    "count": "{total}",
    "title": "Filtres actifs - %d",
    "collapse": {
      "0": "Volet de recherche",
      "_": "Volet de recherche (%d)"
    },
    "countFiltered": "{shown} ({total})",
    "emptyPanes": "Pas de volet de recherche",
    "loadMessage": "Chargement du volet de recherche...",
    "collapseMessage": "Réduire tout",
    "showMessage": "Montrer tout"
  },
  "buttons": {
    "collection": "Collection",
    "colvis": "Visibilité colonnes",
    "colvisRestore": "Rétablir visibilité",
    "copy": "Copier",
    "copySuccess": {
      "1": "1 ligne copiée dans le presse-papier",
      "_": "%ds lignes copiées dans le presse-papier"
    },
    "copyTitle": "Copier dans le presse-papier",
    "csv": "CSV",
    "excel": "Excel",
    "pageLength": {
      "-1": "Afficher toutes les lignes",
      "_": "Afficher %d lignes"
    },
    "pdf": "PDF",
    "print": "Imprimer",
    "copyKeys": "Appuyez sur ctrl ou u2318 + C pour copier les données du tableau dans votre presse-papier.",
    "createState": "Créer un état",
    "removeAllStates": "Supprimer tous les états",
    "removeState": "Supprimer",
    "renameState": "Renommer",
    "savedStates": "États sauvegardés",
    "stateRestore": "État %d",
    "updateState": "Mettre à jour"
  },
  "decimal": ",",
  "search": "Rechercher:",
  "datetime": {
    "previous": "Précédent",
    "next": "Suivant",
    "hours": "Heures",
    "minutes": "Minutes",
    "seconds": "Secondes",
    "unknown": "-",
    "amPm": [
      "am",
      "pm"
    ],
    "months": {
      "0": "Janvier",
      "2": "Mars",
      "3": "Avril",
      "4": "Mai",
      "5": "Juin",
      "6": "Juillet",
      "8": "Septembre",
      "9": "Octobre",
      "10": "Novembre",
      "1": "Février",
      "11": "Décembre",
      "7": "Août"
    },
    "weekdays": [
      "Dim",
      "Lun",
      "Mar",
      "Mer",
      "Jeu",
      "Ven",
      "Sam"
    ]
  },
  "editor": {
    "close": "Fermer",
    "create": {
      "title": "Créer une nouvelle entrée",
      "button": "Nouveau",
      "submit": "Créer"
    },
    "edit": {
      "button": "Editer",
      "title": "Editer Entrée",
      "submit": "Mettre à jour"
    },
    "remove": {
      "button": "Supprimer",
      "title": "Supprimer",
      "submit": "Supprimer",
      "confirm": {
        "_": "Êtes-vous sûr de vouloir supprimer %d lignes ?",
        "1": "Êtes-vous sûr de vouloir supprimer 1 ligne ?"
      }
    },
    "multi": {
      "title": "Valeurs multiples",
      "info": "Les éléments sélectionnés contiennent différentes valeurs pour cette entrée. Pour modifier et définir tous les éléments de cette entrée à la même valeur, cliquez ou tapez ici, sinon ils conserveront leurs valeurs individuelles.",
      "restore": "Annuler les modifications",
      "noMulti": "Ce champ peut être modifié individuellement, mais ne fait pas partie d'un groupe. "
    },
    "error": {
      "system": "Une erreur système s'est produite (<a target=\"\\\" rel=\"nofollow\" href=\"\\\">Plus d'information<\/a>)."
    }
  },
  "stateRestore": {
    "removeSubmit": "Supprimer",
    "creationModal": {
      "button": "Créer",
      "order": "Tri",
      "paging": "Pagination",
      "scroller": "Position du défilement",
      "search": "Recherche",
      "select": "Sélection",
      "columns": {
        "search": "Recherche par colonne",
        "visible": "Visibilité des colonnes"
      },
      "name": "Nom :",
      "searchBuilder": "Recherche avancée",
      "title": "Créer un nouvel état",
      "toggleLabel": "Inclus :"
    },
    "renameButton": "Renommer",
    "duplicateError": "Il existe déjà un état avec ce nom.",
    "emptyError": "Le nom ne peut pas être vide.",
    "emptyStates": "Aucun état sauvegardé",
    "removeConfirm": "Voulez vous vraiment supprimer %s ?",
    "removeError": "Échec de la suppression de l'état.",
    "removeJoiner": "et",
    "removeTitle": "Supprimer l'état",
    "renameLabel": "Nouveau nom pour %s :",
    "renameTitle": "Renommer l'état"
  },
  "info": "Affichage de _START_ à _END_ sur _TOTAL_ entrées",
  "infoEmpty": "Affichage de 0 à 0 sur 0 entrées",
  "infoFiltered": "(filtrées depuis un total de _MAX_ entrées)",
  "lengthMenu": "Afficher _MENU_ entrées",
  "paginate": {
    "first": "Première",
    "last": "Dernière",
    "next": "Suivante",
    "previous": "Précédente"
  },
  "zeroRecords": "Aucune entrée correspondante trouvée",
  "thousands": " "
};

const toTimestamp = (strDate) => {
  const dt = new Date(strDate).getTime();
  return dt / 1000;
};
//filter
function FilterByFromDate(value) {
  $('.main-table tr').each(function () {
    var content = $(this).find('td:first').text();
    if (toTimestamp(content) >= (toTimestamp(value))) {
      $(this).not('thead tr').show();
    } else {
      $(this).not('thead tr').hide();
    }
  });
}

function FilterByToDate(value) {
  $('.main-table tr').each(function () {
    var content = $(this).find('td:first').text();
    if (toTimestamp(content) <= (toTimestamp(value))) {
      $(this).not('thead tr').show();
    } else {
      $(this).not('thead tr').hide();
    }
  });
}
//search
function searchCheck(value) {
  $('.main-table tr').each(function () {
    var content = $(this).find('td').text();
    if (content.toUpperCase().includes(value.trim().toUpperCase())) {
      $(this).not('thead tr').show();
    } else {
      $(this).not('thead tr').hide();
    }
  });
}
var locale;
var oTable;

$(document).ready(function () {
  var succes = $.cookie('SUCCES');
  $('#checkdate').val(new Date().toJSON().slice(0, 10));
  if ($.cookie('langue') !== null) {
    if ($.cookie('langue') === 'ar') {
      locale = ar;
      console.log($.cookie('langue'));
    } else if ($.cookie('langue') === 'fr') {
      locale = fr;
    }
  }

  oTable = $('#main-table').DataTable({
    dom: 'lBrtp',
    responsive: true,
    language: locale,
    buttons: [
      {
        text: NewCheckBtnText(),
        "className": 'Btn',
        action: function () {
          $('.newCheck').show();
          blur();
        }
      },
      {
        text: DepositCheckBtnText(),
        "className": 'Btn',
        action: function () {
          $('.DepositWithCheck').show();
          blur();
        }
      }
    ],
    "aaSorting": [[0, "desc"]],
    "columnDefs": [
      {"className": "dt-center", "targets": "_all"
      }
    ]



  });
  setTimeout(function () {
    oTable.columns.adjust();
  }, 500);
  
}
);


function NewCheckBtnText(){
  AR = 'كتابة الشيك';
  FR = 'Nouveau chèque';
  EN = 'New Check';
    if ($.cookie('langue') !== null) {
    if ($.cookie('langue') === 'ar') {
      return AR;
      console.log($.cookie('langue'));
    } else if ($.cookie('langue') === 'fr') {
      return FR;
    } else if ($.cookie('langue') === 'en') {
      return EN;
    }
    }
  
}

function DepositCheckBtnText(){
  AR = 'ايداع الشيك';
  FR = 'Déposer un chèque';
  EN = 'Deposit a check';
    if ($.cookie('langue') !== null) {
    if ($.cookie('langue') === 'ar') {
      return AR;
      console.log($.cookie('langue'));
    } else if ($.cookie('langue') === 'fr') {
      return FR;
    } else if ($.cookie('langue') === 'en') {
      return EN;
    }
    }
  
}
$("#datepicker_from").datepicker({
  showOn: "button",
  buttonImage: "images/calendar.ico",
  buttonImageOnly: false,
  "onSelect": function (date) {
    minDateFilter = new Date(date).getTime();
    oTable.draw();
  }
}).keyup(function () {
  minDateFilter = new Date(this.value).getTime();
  oTable.draw();
});
$("#datepicker_to").datepicker({
  showOn: "button",
  buttonImage: "images/calendar.ico",
  buttonImageOnly: false,
  "onSelect": function (date) {
    maxDateFilter = new Date(date).getTime() + 23 * 60 * 60 * 1000 + 59 * 60 * 1000 + 59 * 1000;
    console.log(maxDateFilter);
    oTable.draw();
  }
}).keyup(function () {
  maxDateFilter = new Date(this.value).getTime() + 23 * 60 * 60 * 1000 + 59 * 60 * 1000 + 59 * 1000;
  oTable.draw();
});
// Date range filter
minDateFilter = "";
maxDateFilter = "";
$.fn.dataTableExt.afnFiltering.push(
        function (oSettings, aData, iDataIndex) {
          if (typeof aData._date === 'undefined') {
            aData._date = new Date(aData[0]).getTime();
          }

          if (minDateFilter && !isNaN(minDateFilter)) {
            if (aData._date < minDateFilter) {
              return false;
            }
          }

          if (maxDateFilter && !isNaN(maxDateFilter)) {
            if (aData._date > maxDateFilter) {
              return false;
            }
          }
          return true;
        }
);
//search bar
$('#search_account').keyup(function () {
  oTable.search($(this).val(), false, false).draw();
});

function closeDepositCheck() {
  $('.DepositWithCheck').hide();
  unblur();
}

function closeNewCheck() {
  $('.newCheck').hide();
  unblur();
}


function blur() {
  $('.popup_div').show();
  $('.home_content').css('filter', 'blur(5px)');
  $('.sidebar').css('filter', 'blur(5px)');
  $('.profile_content').css('filter', 'blur(5px)');
}

function unblur() {
  $('.popup_div').hide();
  $('.home_content').css('filter', 'none');
  $('.sidebar').css('filter', 'none');
  $('.profile_content').css('filter', 'none');
}

